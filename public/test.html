<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Pulse</title>
    <style>
        body {
            margin: 0;
            padding: 40px;
            background: #121212;
            color: #fff;
            font-family: 'Segoe UI', sans-serif;
            overflow-x: hidden;
        }
        h1 {
            text-align: center;
            font-size: 2.2em;
            color: #fff;
            letter-spacing: 1px;
            margin-bottom: 30px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }
        .day-strip {
            position: relative;
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(30, 30, 30, 0.9);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.4s ease, opacity 0.3s ease;
            cursor: pointer;
        }
        .day-strip.hidden {
            opacity: 0;
            transform: translateY(20px);
            height: 0;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        .day-strip:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 255, 102, 0.2);
        }
        .circle-line {
            display: flex;
            justify-content: center;
            gap: 12px;
            padding: 10px 0;
        }
        .circle {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #333;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        .circle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent);
            transform: translate(-50%, -50%);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .circle:hover {
            transform: scale(1.15);
        }
        .circle:hover::before {
            opacity: 1;
        }
        .present { background: #00ff66; }
        .absent { background: #ff3366; }
        .no-session { background: #666; }
        .day-label {
            font-size: 1.1em;
            color: #ddd;
            text-align: center;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }
        #toggle-btn {
            display: block;
            margin: 30px auto 0;
            padding: 12px 25px;
            background: #00ff66;
            color: #121212;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.3s ease;
        }
        #toggle-btn:hover {
            background: #00cc55;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <h1>Attendance Pulse</h1>
    <div class="container" id="attendance-container"></div>
    <button id="toggle-btn">See All Vibes</button>

    <script>
        // Embedded JSON data
        const data = {
            "name": "BHUVANAGIRI BHARADWAJ",
            "attendance": {
                "attandance": {
                    "dayobjects": [
                        {"day": "Today", "date": "Sun 02 Mar", "updatedon": "Sun 02 Mar at 08:28 AM", "holiday": "true", "sessions": {"session1": "2", "session2": "2", "session3": "2", "session4": "2", "session5": "2", "session6": "2", "session7": "2"}},
                        {"date": "Sat 01 Mar", "holiday": "false", "sessions": {"session1": "2", "session2": "1", "session3": "1", "session4": "1", "session5": "1", "session6": "2", "session7": "2"}},
                        {"date": "Fri 28 Feb", "holiday": "false", "sessions": {"session1": "1", "session2": "1", "session3": "1", "session4": "1", "session5": "2", "session6": "1", "session7": "1"}},
                        {"date": "Thu 27 Feb", "holiday": "false", "sessions": {"session1": "0", "session2": "0", "session3": "0", "session4": "0", "session5": "0", "session6": "0", "session7": "0"}},
                        {"date": "Tue 25 Feb", "holiday": "false", "sessions": {"session1": "1", "session2": "1", "session3": "2", "session4": "1", "session5": "2", "session6": "1", "session7": "2"}}
                    ]
                }
            }
        };

        const dayObjects = data.attendance.attandance.dayobjects;
        const container = document.querySelector('#attendance-container');
        const toggleBtn = document.querySelector('#toggle-btn');
        let isExpanded = false;

        // Render circles for a day's sessions
        function renderCircles(sessions) {
            const sessionValues = Object.values(sessions);
            return sessionValues.map((value, index) => {
                let className = 'circle';
                if (value === "1") className += ' present';
                else if (value === "0") className += ' absent';
                else if (value === "2") className += ' no-session';
                return `<div class="${className}" title="Session ${index + 1}"></div>`;
            }).join('');
        }

        // Initial render: Today only
        function renderInitial() {
            container.innerHTML = '';
            dayObjects.forEach((day, index) => {
                const isToday = day.day === "Today";
                const dayHtml = `
                    <div class="day-strip ${!isToday ? 'hidden' : ''}">
                        <div class="day-label">${day.date} ${day.day ? `(${day.day})` : ''}</div>
                        <div class="circle-line">
                            ${renderCircles(day.sessions)}
                        </div>
                    </div>`;
                container.innerHTML += dayHtml;
            });
            addClickListeners();
        }

        // Expanded render: All days
        function renderExpanded() {
            container.innerHTML = '';
            dayObjects.forEach((day, index) => {
                const dayHtml = `
                    <div class="day-strip" style="animation: slideIn 0.5s ease ${index * 0.1}s both;">
                        <div class="day-label">${day.date} ${day.day ? `(${day.day})` : ''}</div>
                        <div class="circle-line">
                            ${renderCircles(day.sessions)}
                        </div>
                    </div>`;
                container.innerHTML += dayHtml;
            });
            const styleSheet = document.createElement('style');
            styleSheet.textContent = `
                @keyframes slideIn {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }`;
            document.head.appendChild(styleSheet);
            addClickListeners();
        }

        // Add click listeners to collapse individual strips
        function addClickListeners() {
            document.querySelectorAll('.day-strip').forEach(strip => {
                strip.addEventListener('click', () => {
                    strip.classList.toggle('hidden');
                });
            });
        }

        // Toggle between states
        toggleBtn.addEventListener('click', () => {
            if (isExpanded) {
                renderInitial();
                toggleBtn.textContent = 'See All Vibes';
            } else {
                renderExpanded();
                toggleBtn.textContent = 'Back to Today';
            }
            isExpanded = !isExpanded;
        });

        // Initial render
        renderInitial();
    </script>
</body>
</html>